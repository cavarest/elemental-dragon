name: "Lightning Ability Test"
description: "Test that lightning ability damages unarmored zombies"
backend: "real-server"

setup:
  - action: spawn_entity
    name: target_zombie
    type: ZOMBIE
    location: [100, 64, 100]

  - action: give_item
    player: test_player
    item: dragon_egg
    count: 3

  - action: equip_item
    player: test_player
    item: dragon_egg
    slot: offhand

steps:
  - action: player_command
    player: test_player
    command: ability
    args: [lightning, target_zombie]

  - action: wait
    duration: 1000

assertions:
  - type: entity_health
    entity: target_zombie
    condition: less_than
    value: 20.0

  - type: entity_exists
    entity: target_zombie
    expected: true

cleanup:
  - action: remove_entities
    pattern: "target_*"

  - action: remove_players
    pattern: "test_*"
