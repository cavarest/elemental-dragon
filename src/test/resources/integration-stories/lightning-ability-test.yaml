# Dragon Egg Lightning Ability Test
# Tests the dragon egg lightning ability functionality with PILAF commands

name: "Dragon Egg Lightning Ability Test"
description: "Test that the dragon egg lightning ability works correctly with entities"

setup:
  - action: "server_command"
    command: "spawn zombie 5.0 64.0 5.0 {CustomName:\"TestZombie\"}"
    name: "Spawn TestZombie entity"

  - action: "server_command"
    command: "op TestPlayer"
    name: "Make TestPlayer operator"

  - action: "give_item"
    player: "TestPlayer"
    item: "dragon_egg"
    count: 1
    name: "Give dragon egg to TestPlayer"

  - action: "equip_item"
    player: "TestPlayer"
    item: "dragon_egg"
    slot: "mainhand"
    name: "Equip dragon egg to TestPlayer hand"

steps:
  # Move player close to zombie
  - action: "move_player"
    player: "TestPlayer"
    destination: "relative"
    destination: "^ ^ ^5"
    name: "Move TestPlayer 5 blocks towards zombie"

  # Execute lightning ability
  - action: "player_command"
    player: "TestPlayer"
    command: "/ability 1"
    name: "Execute lightning ability"

  # Wait for lightning effect
  - action: "wait"
    duration: 4000
    name: "Wait for lightning processing"

cleanup:
  - action: "remove_entities"
    pattern: "TestZombie"
    name: "Remove TestZombie"
